<!DOCTYPE HTML>
<html><head><link rel="stylesheet" type="text/css" href="../../bootstrap.min.css"><link rel="stylesheet" type="text/css" href="../../style.css"><title>Test.QuickCheck</title></head><body><div class="navbar navbar-default"><div class="container"><div class="navbar-header"><a class="navbar-brand">Core Libraries</a></div><ul class="nav navbar-nav"><li><a href="../../index.html">Contents</a></li><li><a href="../../index/index.html">Index</a></li></ul></div></div><div class="container" id="content"><h1>Test.QuickCheck</h1><p>This module is a partial port of the Haskell QuickCheck library.</p>
<p>QuickCheck provides a way to write <em>property-based</em> tests.</p>
<p>The <code>Arbitrary</code> and <code>CoArbitrary</code> type classes allow us to create
random data with which we can run our tests. This module provides
instances of both classes for PureScript's core data structures,
as well as functions for writing new instances.</p>
<p>Test suites can use the <code>quickCheck</code> and <code>quickCheckPure</code> functions
to test properties.</p>
<p>For example:</p>
<pre class="purescript"><code>main = quickCheck \n -&gt; n + 1 &gt; n
</code></pre>
<a name="Arbitrary" href="#Arbitrary"><h2><code>Arbitrary</code></h2></a><p class="decl"><code><span class="keyword">class</span> <a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ident">t</span> <span class="keyword">where</span></code></p><ul><li><p class="decl"><code><span class="ident">arbitrary</span> <span class="syntax">::</span> <a href="Gen/index.html#Gen"><span class="ctor">Gen</span></a> <span class="ident">t</span></code></p></li></ul><p>The <code>Arbitrary</code> class represents those types whose values can be
<em>randomly-generated</em>.</p>
<p><code>arbitrary</code> uses the <code>Gen</code> monad to express a random generator for
the type <code>t</code>. Combinators in the <code>Test.QuickCheck.Gen</code>
module can be used to construct random generators.</p>
<a name="CoArbitrary" href="#CoArbitrary"><h2><code>CoArbitrary</code></h2></a><p class="decl"><code><span class="keyword">class</span> <a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ident">t</span> <span class="keyword">where</span></code></p><ul><li><p class="decl"><code><span class="ident">coarbitrary</span> <span class="syntax">::</span> <span class="keyword">forall</span> <span class="ident">r</span><span class="syntax">.</span> <span class="ident">t</span> <span class="syntax">-&gt;</span> <span class="syntax">(</span><a href="Gen/index.html#Gen"><span class="ctor">Gen</span></a> <span class="ident">r</span><span class="syntax">)</span> <span class="syntax">-&gt;</span> <a href="Gen/index.html#Gen"><span class="ctor">Gen</span></a> <span class="ident">r</span></code></p></li></ul><p>The <code>CoArbitrary</code> class represents types which appear on the left of
an <code>Arbitrary</code> function arrow.</p>
<p>To construct an <code>Arbitrary</code> instance for the type <code>a -&gt; b</code>, we need to
use the input of type <code>a</code> to <em>perturb</em> a random generator for <code>b</code>. This
is the role of the <code>coarbitrary</code> function.</p>
<p><code>CoArbitrary</code> instances can be written using the <code>perturbGen</code> function.</p>
<a name="Result" href="#Result"><h2><code>Result</code></h2></a><p class="decl"><code><span class="keyword">data</span> <a href="#Result"><span class="ctor">Result</span></a></code></p><ul><li><code><span class="ctor">Success</span></code></li><li><code><span class="ctor">Failed</span> <span class="ctor">String</span></code></li></ul><p>The result of a test: success or failure (with an error message).</p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">showResult</span> <span class="syntax">::</span> <a href="../../Prelude/index.html#Show"><span class="ctor">Show</span></a> <a href="#Result"><span class="ctor">Result</span></a></code></p>
<a name="(&lt;?&gt;)" href="#(&lt;?&gt;)"><h2><code>(&lt;?&gt;)</code></h2></a><p class="decl"><code><span class="ident">(&lt;?&gt;)</span> <span class="syntax">::</span> <span class="ctor">Boolean</span> <span class="syntax">-&gt;</span> <span class="ctor">String</span> <span class="syntax">-&gt;</span> <a href="#Result"><span class="ctor">Result</span></a></code></p><p>This operator attaches an error message to a failed test.</p>
<p>For example:</p>
<pre class="purescript"><code>test x = myProperty x &lt;?&gt; (&quot;myProperty did not hold for &quot; &lt;&gt; show x)
</code></pre>

<p class="decl"><code><span class="keyword">instance</span> <span class="ident">arbChar</span> <span class="syntax">::</span> <a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <a href="../../Data/Char/index.html#Char"><span class="ctor">Char</span></a></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">coarbChar</span> <span class="syntax">::</span> <a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <a href="../../Data/Char/index.html#Char"><span class="ctor">Char</span></a></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">arbNumber</span> <span class="syntax">::</span> <a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ctor">Number</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">coarbNumber</span> <span class="syntax">::</span> <a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ctor">Number</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">arbBoolean</span> <span class="syntax">::</span> <a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ctor">Boolean</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">coarbBoolean</span> <span class="syntax">::</span> <a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ctor">Boolean</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">arbString</span> <span class="syntax">::</span> <a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ctor">String</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">coarbString</span> <span class="syntax">::</span> <a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ctor">String</span></code></p>
<a name="AlphaNumString" href="#AlphaNumString"><h2><code>AlphaNumString</code></h2></a><p class="decl"><code><span class="keyword">newtype</span> <a href="#AlphaNumString"><span class="ctor">AlphaNumString</span></a></code></p><ul><li><code><a href="#AlphaNumString"><span class="ctor">AlphaNumString</span></a> <span class="ctor">String</span></code></li></ul><p>A newtype for <code>String</code> whose <code>Arbitrary</code> instance generated random
alphanumeric strings.</p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">arbAlphaNumString</span> <span class="syntax">::</span> <a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <a href="#AlphaNumString"><span class="ctor">AlphaNumString</span></a></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">coarbAlphaNumString</span> <span class="syntax">::</span> <a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <a href="#AlphaNumString"><span class="ctor">AlphaNumString</span></a></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">arbTuple</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ident">a</span><span class="syntax">,</span> <a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ident">b</span><span class="syntax">) =&gt; </span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="syntax">(</span><a href="../../Data/Tuple/index.html#Tuple"><span class="ctor">Tuple</span></a> <span class="ident">a</span> <span class="ident">b</span><span class="syntax">)</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">coarbTuple</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ident">a</span><span class="syntax">,</span> <a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ident">b</span><span class="syntax">) =&gt; </span><a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="syntax">(</span><a href="../../Data/Tuple/index.html#Tuple"><span class="ctor">Tuple</span></a> <span class="ident">a</span> <span class="ident">b</span><span class="syntax">)</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">arbEither</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ident">a</span><span class="syntax">,</span> <a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ident">b</span><span class="syntax">) =&gt; </span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="syntax">(</span><a href="../../Data/Either/index.html#Either"><span class="ctor">Either</span></a> <span class="ident">a</span> <span class="ident">b</span><span class="syntax">)</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">coarbEither</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ident">a</span><span class="syntax">,</span> <a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ident">b</span><span class="syntax">) =&gt; </span><a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="syntax">(</span><a href="../../Data/Either/index.html#Either"><span class="ctor">Either</span></a> <span class="ident">a</span> <span class="ident">b</span><span class="syntax">)</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">arbMaybe</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ident">a</span><span class="syntax">) =&gt; </span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="syntax">(</span><a href="../../Data/Maybe/index.html#Maybe"><span class="ctor">Maybe</span></a> <span class="ident">a</span><span class="syntax">)</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">coarbMaybe</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ident">a</span><span class="syntax">) =&gt; </span><a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="syntax">(</span><a href="../../Data/Maybe/index.html#Maybe"><span class="ctor">Maybe</span></a> <span class="ident">a</span><span class="syntax">)</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">arbFunction</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ident">a</span><span class="syntax">,</span> <a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ident">b</span><span class="syntax">) =&gt; </span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="syntax">(</span><span class="ident">a</span> <span class="syntax">-&gt;</span> <span class="ident">b</span><span class="syntax">)</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">coarbFunction</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ident">a</span><span class="syntax">,</span> <a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ident">b</span><span class="syntax">) =&gt; </span><a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="syntax">(</span><span class="ident">a</span> <span class="syntax">-&gt;</span> <span class="ident">b</span><span class="syntax">)</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">arbArray</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ident">a</span><span class="syntax">) =&gt; </span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="syntax">[</span><span class="ident">a</span><span class="syntax">]</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">coarbArray</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="ident">a</span><span class="syntax">) =&gt; </span><a href="#CoArbitrary"><span class="ctor">CoArbitrary</span></a> <span class="syntax">[</span><span class="ident">a</span><span class="syntax">]</span></code></p>
<a name="Testable" href="#Testable"><h2><code>Testable</code></h2></a><p class="decl"><code><span class="keyword">class</span> <a href="#Testable"><span class="ctor">Testable</span></a> <span class="ident">prop</span> <span class="keyword">where</span></code></p><ul><li><p class="decl"><code><span class="ident">test</span> <span class="syntax">::</span> <span class="ident">prop</span> <span class="syntax">-&gt;</span> <a href="Gen/index.html#Gen"><span class="ctor">Gen</span></a> <a href="#Result"><span class="ctor">Result</span></a></code></p></li></ul><p>The <code>Testable</code> class represents <em>testable properties</em>.</p>
<p>A testable property is a function of zero or more <code>Arbitrary</code> arguments,
returning a <code>Boolean</code> or <code>Result</code>.</p>
<p>Testable properties can be passed to the <code>quickCheck</code> function.</p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">testableResult</span> <span class="syntax">::</span> <a href="#Testable"><span class="ctor">Testable</span></a> <a href="#Result"><span class="ctor">Result</span></a></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">testableBoolean</span> <span class="syntax">::</span> <a href="#Testable"><span class="ctor">Testable</span></a> <span class="ctor">Boolean</span></code></p>
<p class="decl"><code><span class="keyword">instance</span> <span class="ident">testableFunction</span> <span class="syntax">::</span> <span class="syntax">(</span><a href="#Arbitrary"><span class="ctor">Arbitrary</span></a> <span class="ident">t</span><span class="syntax">,</span> <a href="#Testable"><span class="ctor">Testable</span></a> <span class="ident">prop</span><span class="syntax">) =&gt; </span><a href="#Testable"><span class="ctor">Testable</span></a> <span class="syntax">(</span><span class="ident">t</span> <span class="syntax">-&gt;</span> <span class="ident">prop</span><span class="syntax">)</span></code></p>
<a name="quickCheckPure" href="#quickCheckPure"><h2><code>quickCheckPure</code></h2></a><p class="decl"><code><span class="ident">quickCheckPure</span> <span class="syntax">::</span> <span class="keyword">forall</span> <span class="ident">prop</span><span class="syntax">.</span> <span class="syntax">(</span><a href="#Testable"><span class="ctor">Testable</span></a> <span class="ident">prop</span><span class="syntax">)</span> <span class="syntax">=&gt;</span> <span class="ctor">Number</span> <span class="syntax">-&gt;</span> <span class="ctor">Number</span> <span class="syntax">-&gt;</span> <span class="ident">prop</span> <span class="syntax">-&gt;</span> <span class="syntax">[</span><a href="#Result"><span class="ctor">Result</span></a><span class="syntax">]</span></code></p><p>Test a property, returning all test results as an array.</p>
<p>The first argument is the <em>random seed</em> to be passed to the random generator.
The second argument is the number of tests to run.</p>

<a name="QC" href="#QC"><h2><code>QC</code></h2></a><p class="decl"><code><span class="keyword">type</span> <a href="#QC"><span class="ctor">QC</span></a> <span class="ident">a</span> <span class="syntax">=</span> <span class="keyword">forall</span> <span class="ident">eff</span><span class="syntax">.</span> <a href="../../Control/Monad/Eff/index.html#Eff"><span class="ctor">Eff</span></a> <span class="syntax">(</span><span class="ident">trace</span> <span class="syntax">::</span> <a href="../../Debug/Trace/index.html#Trace"><span class="ctor">Trace</span></a><span class="syntax">,</span> <span class="ident">random</span> <span class="syntax">::</span> <a href="../../Control/Monad/Eff/Random/index.html#Random"><span class="ctor">Random</span></a><span class="syntax">,</span> <span class="ident">err</span> <span class="syntax">::</span> <a href="../../Control/Monad/Eff/Exception/index.html#Exception"><span class="ctor">Exception</span></a> <span class="syntax">|</span> <span class="ident">eff</span><span class="syntax">)</span> <span class="ident">a</span></code></p><p>A type synonym which represents the effects used by the <code>quickCheck</code> function.</p>
<a name="quickCheck&#39;" href="#quickCheck&#39;"><h2><code>quickCheck&#39;</code></h2></a><p class="decl"><code><span class="ident">quickCheck&#39;</span> <span class="syntax">::</span> <span class="keyword">forall</span> <span class="ident">prop</span><span class="syntax">.</span> <span class="syntax">(</span><a href="#Testable"><span class="ctor">Testable</span></a> <span class="ident">prop</span><span class="syntax">)</span> <span class="syntax">=&gt;</span> <span class="ctor">Number</span> <span class="syntax">-&gt;</span> <span class="ident">prop</span> <span class="syntax">-&gt;</span> <a href="#QC"><span class="ctor">QC</span></a> <a href="../../Prelude/index.html#Unit"><span class="ctor">Unit</span></a></code></p><p>A variant of the <code>quickCheck</code> function which accepts an extra parameter
representing the number of tests which should be run.</p>

<a name="quickCheck" href="#quickCheck"><h2><code>quickCheck</code></h2></a><p class="decl"><code><span class="ident">quickCheck</span> <span class="syntax">::</span> <span class="keyword">forall</span> <span class="ident">prop</span><span class="syntax">.</span> <span class="syntax">(</span><a href="#Testable"><span class="ctor">Testable</span></a> <span class="ident">prop</span><span class="syntax">)</span> <span class="syntax">=&gt;</span> <span class="ident">prop</span> <span class="syntax">-&gt;</span> <a href="#QC"><span class="ctor">QC</span></a> <a href="../../Prelude/index.html#Unit"><span class="ctor">Unit</span></a></code></p><p>Test a property.</p>
<p>This function generates a new random seed, runs 100 tests and
prints the test results to the console.</p>

<a name="(===)" href="#(===)"><h2><code>(===)</code></h2></a><p class="decl"><code><span class="ident">(===)</span> <span class="syntax">::</span> <span class="keyword">forall</span> <span class="ident">a</span> <span class="ident">b</span><span class="syntax">.</span> <span class="syntax">(</span><a href="../../Prelude/index.html#Eq"><span class="ctor">Eq</span></a> <span class="ident">a</span><span class="syntax">,</span> <a href="../../Prelude/index.html#Show"><span class="ctor">Show</span></a> <span class="ident">a</span><span class="syntax">)</span> <span class="syntax">=&gt;</span> <span class="ident">a</span> <span class="syntax">-&gt;</span> <span class="ident">a</span> <span class="syntax">-&gt;</span> <a href="#Result"><span class="ctor">Result</span></a></code></p><p>Self-documenting equality assertion</p>

<a name="(/==)" href="#(/==)"><h2><code>(/==)</code></h2></a><p class="decl"><code><span class="ident">(/==)</span> <span class="syntax">::</span> <span class="keyword">forall</span> <span class="ident">a</span> <span class="ident">b</span><span class="syntax">.</span> <span class="syntax">(</span><a href="../../Prelude/index.html#Eq"><span class="ctor">Eq</span></a> <span class="ident">a</span><span class="syntax">,</span> <a href="../../Prelude/index.html#Show"><span class="ctor">Show</span></a> <span class="ident">a</span><span class="syntax">)</span> <span class="syntax">=&gt;</span> <span class="ident">a</span> <span class="syntax">-&gt;</span> <span class="ident">a</span> <span class="syntax">-&gt;</span> <a href="#Result"><span class="ctor">Result</span></a></code></p><p>Self-documenting inequality assertion</p>

</div></body></html>